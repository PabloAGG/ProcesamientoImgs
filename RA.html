
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TIKITAKA-RA</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.2.0/introjs.min.css"  crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="CSS/RA.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
   <header>
        <a href="index.html"><img src="IMG/favicon.png" alt="logo" id="logoprin"></a>
          <button onclick="location.href='index.html'"><i class="fa-solid fa-home"></i></button>
     
    </header>
    <!-- Modal de trivia -->
  <div id="modal-trivia" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.85); z-index:2000; justify-content:center; align-items:center;">
    <div style="position:relative; max-width:90vw; max-height:80vh; background:#222; color:white; border-radius:10px; padding:30px 20px 20px 20px; box-shadow:0 4px 24px #000; overflow-y:auto; min-width:300px;">
      <button onclick="cerrarModalTrivia()" style="position:absolute; top:10px; right:10px; background:#18510c; color:white; border:none; border-radius:50%; width:40px; height:40px; font-size:1.5rem; cursor:pointer; z-index:10;">&times;</button>
      <div id="contenido-trivia">
        <!-- Aquí se carga la trivia -->
      </div>
    </div>
  </div>
  
<div id="modal-datos" class="modal-overlay">
    <div class="modal-container">
      <button onclick="cerrarModalDatos()" class="modal-close-btn">&times;</button>
      <div id="contenido-datos">
        </div>
    </div>
  </div>
  <!-- Cámara -->
  <video id="video" width="100%" height="100%" autoplay></video>
  
  <!-- Canvas oculto para procesar la imagen -->
  <canvas id="frameCanvas" width="400" height="200" style="display:none;"></canvas>

  
  <!-- Canvas 3D para modelos -->
  <canvas id="canvas3d" style="position: fixed; top: 60px; left: 0; width: 100%; height: calc(100vh - 60px); pointer-events: none; z-index: 500;"></canvas>
  

  <!-- Información de detección -->
  <div id="deteccion-info" style="position: fixed; top: 70px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 10px; border-radius: 5px; z-index: 1000; display: none;">
    <p id="bandera-detectada">Bandera detectada: <span id="nombre-bandera">-</span></p>
    <p id="confianza">Confianza: <span id="valor-confianza">0%</span></p>
  </div>

  <!-- Modal de video mundial -->
  <div id="modal-video" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.85); z-index:2000; justify-content:center; align-items:center;">
    <div style="position:relative; max-width:90vw; max-height:80vh;">
      <button onclick="cerrarModalVideo()" style="position:absolute; top:10px; right:10px; background:#18510c; color:white; border:none; border-radius:50%; width:40px; height:40px; font-size:1.5rem; cursor:pointer; z-index:10;">&times;</button>
      <video id="video-mundial" controls style="width:100%; max-height:70vh; border-radius:10px; background:black;">
        <source src="https://www.fifa.com/video/some-worldcup-video.mp4" type="video/mp4">
        Tu navegador no soporta la reproducción de video.
      </video>
    </div>
  </div>

    <!-- Botones de interacción -->
    <div id="botones-interaccion">
      <button class="btn-interaccion" id="videomodal"><i class="fa-solid fa-video"></i></button>
      <button class="btn-interaccion" id="datos"><i class="fa-solid fa-question"></i></button>
      <button class="btn-interaccion" id="trivia"><i class="fa-solid fa-clipboard-check"></i></button>
      <button class="btn-interaccion" id="animacion"><i class="fa-solid fa-cube"></i></button>
      <button class="btn-interaccion" id="btn-iniciar-modelo" style="display:none;"><i class="fa-solid fa-play"></i></button>
    </div>
   <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- TensorFlow.js -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
  <!-- Three.js para modelos 3D -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

  <script src="RA.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.2.0/intro.min.js"  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script> 
document.addEventListener('DOMContentLoaded', function() {

// Solo mostrar el tutorial si no se ha completado antes
if (!localStorage.getItem('introRA')) {
  const introSteps = [
    {
      element: document.querySelector('header'),
      intro: "¡Bienvenido a la experiencia de Realidad Aumentada del Mundial! Desde aquí puedes volver a la página principal.",
      position: 'bottom'
    },
    {
      element: document.querySelector('#videomodal'),
      intro: "Haz clic aquí para ver un video especial sobre el Mundial.",
      position: 'left'
    },
    {
      element: document.querySelector('#datos'),
      intro: "Aquí puedes consultar datos y curiosidades del Mundial.",
      position: 'left'
    },
    {
      element: document.querySelector('#trivia'),
      intro: "Pon a prueba tus conocimientos con la trivia del Mundial.",
      position: 'left'
    },
    {
      element: document.querySelector('#animacion'),
      intro: "Activa la cámara y la detección de banderas para ver modelos 3D en RA.",
      position: 'left'
    },
    {
      element: document.querySelector('#btn-iniciar-modelo'),
      intro: "Cuando la cámara esté activa, aquí podrás iniciar la animación del modelo 3D detectado.",
      position: 'left'
    },
    {
      element: document.querySelector('#video'),
      intro: "Aquí verás la cámara en tiempo real para escanear banderas.",
      position: 'top'
    },
    {
      element: document.querySelector('#canvas3d'),
      intro: "En este espacio aparecerán los modelos 3D de las banderas detectadas.",
      position: 'top'
    },
    {
      intro: "¡Has completado el tour! Ya puedes disfrutar de todas las funciones de la página RA. ¡Diviértete!"
    }
  ];

  // Filtrar pasos donde el elemento existe
  const activeIntroSteps = introSteps.filter(step => {
    if (step.element) {
      return step.element !== null;
    }
    return true;
  });

  if (activeIntroSteps.length > 0) {
    introJs().setOptions({
      steps: activeIntroSteps,
      nextLabel: 'Siguiente →',
      prevLabel: '← Anterior',
      doneLabel: 'Finalizar',
      tooltipClass: 'introjs-custom-tooltip',
      showBullets: false,
    }).oncomplete(function() {
      localStorage.setItem('introRA', '1');
    }).start();
  }
}

});
</script>
</body>
</html>
